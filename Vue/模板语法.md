# 模板语法

Vue.js 使用了基于 HTML 的模板语法，允许开发者声明式地将 DOM 绑定至底层 Vue 实例的数据。所有 Vue.js 的模板都是合法的 HTML，所以能被遵循规范的浏览器和 HTML 解析器解析。

在底层的实现上，Vue 将模板编译成虚拟 DOM 渲染函数。结合响应系统，Vue 能够智能地计算出最少需要重新渲染多少组件，并把 DOM 操作次数减到最少。

如果你熟悉虚拟 DOM 并且偏爱 JavaScript 的原始力量，你也可以不用模板，[直接写渲染 (render) 函数](https://v2.cn.vuejs.org/v2/guide/render-function.html)，使用可选的 JSX 语法。



## 插值

### 文本

数据绑定最常见的形式就是使用“Mustache”语法 (双大括号) 的文本插值：

```
<span>Message: {{ msg }}</span>
```

Mustache 标签将会被替代为对应数据对象上 `msg` property 的值。无论何时，绑定的数据对象上 `msg` property 发生了改变，插值处的内容都会更新。

通过使用 [v-once 指令](https://v2.cn.vuejs.org/v2/api/#v-once)，你也能执行一次性地插值，当数据改变时，插值处的内容不会更新。但请留心这会影响到该节点上的其它数据绑定：

```
<span v-once>这个将不会改变: {{ msg }}</span>
```



### 原始 HTML

双大括号会将数据解释为普通文本，而非 HTML 代码。为了输出真正的 HTML，你需要使用 [`v-html` 指令](https://v2.cn.vuejs.org/v2/api/#v-html)：

```
<p>Using mustaches: {{ rawHtml }}</p>
<p>Using v-html directive: <span v-html="rawHtml"></span></p>
```

Using mustaches: <span style="color: red">This should be red.</span>

Using v-html directive: This should be red.

这个 `span` 的内容将会被替换成为 property 值 `rawHtml`，直接作为 HTML——会忽略解析 property 值中的数据绑定。注意，你不能使用 `v-html` 来复合局部模板，因为 Vue 不是基于字符串的模板引擎。反之，对于用户界面 (UI)，组件更适合作为可重用和可组合的基本单位。

你的站点上动态渲染的任意 HTML 可能会非常危险，因为它很容易导致 [XSS 攻击](https://en.wikipedia.org/wiki/Cross-site_scripting)。请只对可信内容使用 HTML 插值，**绝不要**对用户提供的内容使用插值。



### Attribute

Mustache 语法不能作用在 HTML attribute 上，遇到这种情况应该使用 [`v-bind` 指令](https://v2.cn.vuejs.org/v2/api/#v-bind)：

```
<div v-bind:id="dynamicId"></div>
```

对于布尔 attribute (它们只要存在就意味着值为 `true`)，`v-bind` 工作起来略有不同，在这个例子中：

```
<button v-bind:disabled="isButtonDisabled">Button</button>
```

如果 `isButtonDisabled` 的值是 `null`、`undefined` 或 `false`，则 `disabled` attribute 甚至不会被包含在渲染出来的 `<button>` 元素中。





## 缩写

### v-bind 缩写

```html
<!-- 完整语法 -->
<a v-bind:href="url">...</a>

<!-- 缩写 -->
<a :href="url">...</a>

<!-- 动态参数的缩写 (2.6.0+) -->
<a :[key]="url"> ... </a>
```



### v-on 缩写

```html
<!-- 完整语法 -->
<a v-on:click="doSomething">...</a>

<!-- 缩写 -->
<a @click="doSomething">...</a>

<!-- 动态参数的缩写 (2.6.0+) -->
<a @[event]="doSomething"> ... </a>
```

它们看起来可能与普通的 HTML 略有不同，但 `:` 与 `@` 对于 attribute 名来说都是合法字符，在所有支持 Vue 的浏览器都能被正确地解析。而且，它们不会出现在最终渲染的标记中。缩写语法是完全可选的，但随着你更深入地了解它们的作用，你会庆幸拥有它们。





## v-bind 和 v-model区别

`v-bind` 和 `v-model` 是 Vue 中常用的指令，但它们的功能不同。让我们详细对比它们的区别：



### 1. **`v-bind`：动态绑定 HTML 属性**

- **功能**：`v-bind` 用于动态绑定一个 HTML 属性的值，通常绑定的是 HTML 元素的属性值，比如 `href`、`src`、`class`、`id` 等等。

- 常见用法：

  ```html
  <a v-bind:href="url">访问网站</a>
  <!-- 或者使用缩写 -->
  <a :href="url">访问网站</a>
  ```

- **如何工作**：`v-bind` 会将 Vue 实例中的某个值（如 `url`）绑定到 HTML 属性（如 `href`），当该值发生变化时，绑定的属性也会自动更新。

- **用途**：绑定任何 HTML 属性，比如 `src`、`href`、`class`、`id` 等。



#### 例子：

```html
<img v-bind:src="imageUrl" alt="示例图片">
```

```html
data() {
  return {
    imageUrl: 'https://www.example.com/image.jpg'
  }
}
```

这里，`v-bind:src` 将 Vue 中的 `imageUrl` 绑定到 `<img>` 标签的 `src` 属性上。



### 2. **`v-model`：双向数据绑定**

- **功能**：`v-model` 用于在表单元素（如 `<input>`、`<textarea>`、`<select>`）上进行**双向数据绑定**。它会自动绑定表单元素的 `value` 属性，并在用户输入时同步更新 Vue 实例中的数据。

- 常见用法：

  ```
  <input v-model="searchText">
  ```

  - 这等价于：

    ```
    <input v-bind:value="searchText" v-on:input="searchText = $event.target.value">
    ```

- **如何工作**：`v-model` 既绑定了表单元素的 `value` 属性，又监听了输入事件（`input`、`change` 等），这样当用户输入时，Vue 实例中的 `searchText` 也会自动更新，形成双向绑定。

- **用途**：通常用于表单元素，像 `<input>`、`<textarea>` 和 `<select>`，使用户输入的数据能即时反映在 Vue 实例中。



#### 例子：

```html
<input v-model="message" placeholder="输入你的信息">
<p>{{ message }}</p>
```

```html
data() {
  return {
    message: ''
  }
}
```

- 当用户在 `<input>` 中输入内容时，`message` 变量会同步更新，`{{ message }}` 也会即时显示最新的值。



### 3. **主要区别**：

| **特性**      | **`v-bind`**                                       | **`v-model`**                                          |
| ------------- | -------------------------------------------------- | ------------------------------------------------------ |
| **功能**      | 动态绑定 HTML 属性的值                             | 在表单元素上实现双向数据绑定                           |
| **应用场景**  | 动态绑定 `href`、`src`、`class`、`id` 等 HTML 属性 | 绑定表单元素（如 `<input>`、`<textarea>`、`<select>`） |
| **单向/双向** | 单向绑定（从 Vue 数据到 HTML 属性）                | 双向绑定（Vue 数据和表单元素之间相互同步）             |
| **监听事件**  | 不会自动监听用户输入事件                           | 自动监听输入事件，更新 Vue 实例中的数据                |
| **缩写形式**  | `:属性名`                                          | 无缩写形式                                             |



### 4. **示例对比**：

- **`v-bind` 示例**：单向绑定（动态属性）

  ```html
  <img :src="imageUrl" alt="示例图片">
  ```

  这里 `imageUrl` 绑定到 `src` 属性，当 `imageUrl` 变化时，图片的 `src` 也会更新。

- **`v-model` 示例**：双向绑定（表单输入）

  ```html
  <input v-model="userInput">
  <p>你输入了: {{ userInput }}</p>
  ```

  这里用户输入的内容会立即更新 `userInput` 变量，并且会实时显示在页面上。



### 总结：

- **`v-bind`** 是单向绑定，用于绑定 HTML 属性的值。
- **`v-model`** 是双向绑定，专用于表单元素，将数据与用户输入保持同步。